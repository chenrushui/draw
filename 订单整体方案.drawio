<mxfile host="www.draw.io" modified="2019-12-16T02:52:22.540Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/74.0.3729.108 Safari/537.36" etag="sKhCNQefsmwpoaI2lkC7" version="12.4.1" type="github" pages="1">
  <diagram id="6WwkfFOdXuNgnHYrmwzb" name="第 1 页">
    <mxGraphModel dx="1824" dy="926" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="1654" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-18" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="401" y="240" width="360" height="160" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-1" value="订单微服务方案" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=25;" vertex="1" parent="1">
          <mxGeometry x="440" y="90" width="240" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-2" value="以创建订单流程为例" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;" vertex="1" parent="1">
          <mxGeometry x="441" y="134" width="240" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-3" value="&lt;span style=&quot;font-size: 15px&quot;&gt;客户端&lt;/span&gt;" style="aspect=fixed;html=1;points=[];align=center;image;fontSize=12;image=img/lib/mscae/Identity_Governance.svg;" vertex="1" parent="1">
          <mxGeometry x="161" y="280" width="80" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-13" value="&lt;font style=&quot;font-size: 15px&quot;&gt;订单微服务1&lt;/font&gt;" style="shape=image;html=1;verticalAlign=top;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;imageAspect=0;aspect=fixed;image=https://cdn0.iconfinder.com/data/icons/frankfurt/32/order-1.png" vertex="1" parent="1">
          <mxGeometry x="440" y="280" width="80" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-15" value="&lt;font style=&quot;font-size: 15px&quot;&gt;订单微服务2&lt;/font&gt;" style="shape=image;html=1;verticalAlign=top;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;imageAspect=0;aspect=fixed;image=https://cdn0.iconfinder.com/data/icons/frankfurt/32/order-1.png" vertex="1" parent="1">
          <mxGeometry x="639" y="280" width="80" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-19" value="订单微服务集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="521" y="250" width="120" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-21" value="&lt;font style=&quot;font-size: 15px&quot;&gt;数据库&lt;/font&gt;" style="outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.mysql_db_instance;fillColor=#2E73B8;gradientColor=none;fontSize=22;" vertex="1" parent="1">
          <mxGeometry x="679" y="480" width="80" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-22" value="&lt;font style=&quot;font-size: 15px&quot;&gt;Redis&lt;/font&gt;" style="outlineConnect=0;dashed=0;verticalLabelPosition=bottom;verticalAlign=top;align=center;html=1;shape=mxgraph.aws3.redis;fillColor=#2E73B8;gradientColor=none;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="401" y="480" width="80" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-28" value="" style="endArrow=classic;html=1;fontSize=16;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="261" y="301" as="sourcePoint"/>
            <mxPoint x="381" y="301" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-29" value="" style="endArrow=classic;html=1;fontSize=16;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.884;exitY=1.007;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="735.2399999999998" y="401.1199999999999" as="sourcePoint"/>
            <mxPoint x="735" y="480" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-30" value="" style="endArrow=classic;html=1;fontSize=16;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="379.5" y="357.5" as="sourcePoint"/>
            <mxPoint x="262.5" y="357.5" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-31" value="ID生成器" style="shape=image;html=1;verticalAlign=top;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;imageAspect=0;aspect=fixed;image=https://cdn3.iconfinder.com/data/icons/adobe-tools/512/Id-128.png;dashed=1;fillColor=none;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="881" y="280" width="80" height="80" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-32" value="" style="endArrow=classic;html=1;fontSize=16;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="761" y="310" as="sourcePoint"/>
            <mxPoint x="881" y="310" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-35" value="" style="endArrow=classic;html=1;fontSize=16;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="325" as="sourcePoint"/>
            <mxPoint x="763" y="325" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-36" value="" style="endArrow=classic;html=1;fontSize=16;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="261" y="348" as="sourcePoint"/>
            <mxPoint x="381" y="348" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-37" value="" style="endArrow=classic;html=1;fontSize=16;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="379.5" y="310" as="sourcePoint"/>
            <mxPoint x="262.5" y="310" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-38" value="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;fontSize=16;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="310" y="276" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-39" value="2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;fontSize=16;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="820" y="286" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-40" value="3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;fontSize=16;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="820" y="330" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-43" value="4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;fontSize=16;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="743" y="430" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-46" value="8" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;fontSize=16;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="310" y="310" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-47" value="" style="endArrow=classic;html=1;fontSize=16;exitX=0.084;exitY=1.032;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="WwyLj68nMvtHMdWTFRt9-18">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="381" y="410" as="sourcePoint"/>
            <mxPoint x="430" y="470" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-48" value="" style="endArrow=classic;html=1;fontSize=16;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="444" y="470" as="sourcePoint"/>
            <mxPoint x="444" y="410" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-49" value="9" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#ffe6cc;fontSize=16;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="350" y="330" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-50" value="10" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#ffe6cc;fontSize=16;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="410" y="430" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-51" value="11" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#ffe6cc;fontSize=16;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="450" y="430" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-52" value="12" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#ffe6cc;fontSize=16;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="311" y="360" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-53" value="&lt;font style=&quot;font-size: 21px&quot;&gt;创建订单流程：&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="230" y="610" width="149" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-54" value="&lt;font style=&quot;font-size: 16px&quot;&gt;1、客户端选择商品开始下单；&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="241" y="650" width="309" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-55" value="&lt;font style=&quot;font-size: 16px&quot;&gt;2、订单微服务校验传递商品信息，向订单生成器请求获取唯一订单id；&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="241" y="682" width="529" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-56" value="&lt;font style=&quot;font-size: 16px&quot;&gt;3、全局id唯一生成器返回生成的订单id；&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="241" y="717" width="499" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-57" value="4、订单微服务向mysql数据库查询当前订单id是否存在；" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="241" y="752" width="499" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-58" value="" style="endArrow=classic;html=1;fontSize=16;entryX=0.849;entryY=1.01;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="723" y="479" as="sourcePoint"/>
            <mxPoint x="722.6399999999999" y="401.5999999999999" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-59" value="5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;fontSize=16;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="712" y="430" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-60" value="" style="endArrow=classic;html=1;fontSize=16;entryX=0.5;entryY=0;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.884;exitY=1.007;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="706.2399999999998" y="404.6199999999999" as="sourcePoint"/>
            <mxPoint x="706" y="483.5" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-61" value="6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;fontSize=16;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="681" y="430" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-62" value="5、mysql返回查询结果；" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="241" y="782" width="499" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-63" value="6、把订单号和商品信息持久化到数据库中；" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="241" y="810" width="499" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-64" value="7、把订单信息存入redis缓存中方便查询；" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="241" y="840" width="499" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-65" value="" style="endArrow=classic;html=1;fontSize=16;entryX=1;entryY=0.53;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.798;exitY=1.03;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="WwyLj68nMvtHMdWTFRt9-18">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="676" y="522" as="sourcePoint"/>
            <mxPoint x="487" y="522.4000000000001" as="targetPoint"/>
          </mxGeometry>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-66" value="7" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#f8cecc;fontSize=16;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="600" y="460" width="20" height="20" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-67" value="&lt;span style=&quot;font-size: 21px&quot;&gt;查询订单流程：&lt;/span&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="230" y="920" width="149" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-68" value="&lt;font style=&quot;font-size: 16px&quot;&gt;9、客户端向订单微服务请求查询订单详情；&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="240" y="960" width="319" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-69" value="&lt;font style=&quot;font-size: 16px&quot;&gt;10、订单微服务首先从redis中查询订单是否存在；&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="234" y="992" width="529" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-70" value="&lt;font style=&quot;font-size: 16px&quot;&gt;11、如果redis中存在订单信息，直接返回；&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="235" y="1027" width="499" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-71" value="12、订单微服务向客户端返回订单详情；" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="235" y="1062" width="499" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-77" value="&lt;font style=&quot;font-size: 21px&quot;&gt;15位数字字母结合&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;" vertex="1" parent="1">
          <mxGeometry x="830" y="410" width="190" height="30" as="geometry"/>
        </mxCell>
        <mxCell id="WwyLj68nMvtHMdWTFRt9-78" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;fontSize=16;align=left;dashed=1;strokeColor=#7EA6E0;" vertex="1" parent="1">
          <mxGeometry x="840" y="410" width="170" height="30" as="geometry"/>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
